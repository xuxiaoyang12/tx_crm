<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kaishengit.mapper.SalesMapper">

    <insert id="save">
        insert into t_sales (name,price,user_name,last_time,user_id,customer_name,customer_id,progress)
        VALUES (#{name},#{price},#{userName},#{lastTime},#{userId},#{customerName},#{customerId},#{progress})
    </insert>


    <select id="findSalesByQueryName" resultType="com.kaishengit.pojo.Sales">

        select * from t_sales
        <where>
            <if test="name !=null and name = ''">
                name like concat('%',#{name},'%')
            </if>
            <if test="progress !=null and progress != ''">
                and progress = #{progress}
            </if>
            <if test="startTime != null and startTime !=''">
                and date(last_time) >= #{startTime}
            </if>
            <if test="endTime != null and endTime !=''">
                and date(last_time) &lt;= #{endTime}
            </if>
        </where>
        limit ${start},${length}

    </select>
    <select id="count" resultType="java.lang.Long">
        select COUNT(*) from t_sales
    </select>
    <select id="conntFilter" resultType="java.lang.Long">
        select COUNT(*) from t_sales
        <where>
            <if test="name !=null and name = ''">
                name like concat('%',#{name},'%')
            </if>
            <if test="progress !=null and progress != ''">
                and progress = #{progress}
            </if>
            <if test="startTime != null and startTime !=''">
                and date(last_time) >= #{startTime}
            </if>
            <if test="endTime != null and endTime !=''">
                and date(last_time) &lt;= #{endTime}
            </if>
        </where>
    </select>
</mapper>